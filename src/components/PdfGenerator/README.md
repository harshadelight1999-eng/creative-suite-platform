# PDF Generation System\n\nA comprehensive PDF generation system built with pdfme library, providing professional templates, real-time editing, and robust error handling.\n\n## üöÄ Features\n\n### Core Functionality\n- **Professional Templates**: 3 built-in templates (Business Letter, Invoice, Report)\n- **Visual Designer**: Interactive drag-and-drop PDF editor\n- **Multi-page Support**: Handle complex documents with multiple pages\n- **Real-time Preview**: Instant preview of changes\n- **Progress Tracking**: Live progress indicators during generation\n- **Error Handling**: Comprehensive error handling with retry functionality\n- **Performance Monitoring**: Track generation times and optimization\n\n### Templates Available\n\n#### 1. Business Letter Template\n- Professional letterhead layout\n- Company logo and contact information\n- Recipient details and addressing\n- Subject line and formal body text\n- Signature section\n\n#### 2. Invoice Template\n- Header with invoice number and dates\n- Company and client information\n- Itemized billing table\n- Tax calculations and totals\n- Payment terms and instructions\n\n#### 3. Business Report Template\n- Executive summary section\n- Key performance metrics\n- Detailed analysis content\n- Strategic recommendations\n- Professional formatting\n\n## üì¶ Components\n\n### Main Components\n\n#### `PdfGenerator`\nThe main component that orchestrates the entire PDF generation workflow.\n\n```tsx\nimport { PdfGenerator } from './components/PdfGenerator';\n\n<PdfGenerator\n  document={document} // Optional: existing document data\n  isOpen={showPdfGenerator}\n  onClose={() => setShowPdfGenerator(false)}\n/>\n```\n\n#### `TemplateSelector`\nAllows users to choose from professional templates or create custom ones.\n\n#### `ProgressIndicator`\nShows real-time progress during PDF generation with stage information.\n\n#### `ErrorDisplay` & `SuccessDisplay`\nHandle error states and success feedback with retry functionality.\n\n### Services\n\n#### `PdfmeService`\nCore service handling PDF generation, template management, and file operations.\n\n```typescript\nimport { pdfmeService } from './services/PdfmeService';\n\n// Generate PDF with progress tracking\nconst pdfData = await pdfmeService.generatePdf(template, inputs, {\n  filename: 'my-document.pdf',\n  onProgress: (progress) => {\n    console.log(`${progress.stage}: ${progress.progress}%`);\n  }\n});\n\n// Download PDF\nawait pdfmeService.downloadPdf(pdfData, 'my-document.pdf');\n\n// Preview PDF in new tab\nawait pdfmeService.previewPdf(pdfData);\n```\n\n### Hooks\n\n#### `usePdfGeneration`\nCustom hook for managing PDF generation state and operations.\n\n```typescript\nimport { usePdfGeneration } from './hooks/usePdfGeneration';\n\nconst {\n  isGenerating,\n  progress,\n  error,\n  generatePdf,\n  downloadPdf,\n  previewPdf,\n  retryLastGeneration\n} = usePdfGeneration({\n  onSuccess: (pdfData, filename) => {\n    console.log(`Generated ${filename}`);\n  },\n  onError: (error) => {\n    console.error('Generation failed:', error);\n  }\n});\n```\n\n## üõ†Ô∏è Usage Examples\n\n### Basic Usage\n\n```tsx\nimport { useState } from 'react';\nimport { PdfGenerator } from './components/PdfGenerator';\n\nfunction MyApp() {\n  const [showPdfGenerator, setShowPdfGenerator] = useState(false);\n  \n  return (\n    <div>\n      <button onClick={() => setShowPdfGenerator(true)}>\n        Generate PDF\n      </button>\n      \n      <PdfGenerator\n        isOpen={showPdfGenerator}\n        onClose={() => setShowPdfGenerator(false)}\n      />\n    </div>\n  );\n}\n```\n\n### Advanced Usage with Custom Data\n\n```tsx\nimport { PdfGenerator, SAMPLE_BUSINESS_LETTER } from './components/PdfGenerator';\n\nconst customDocument = {\n  id: 'doc-1',\n  title: 'My Business Letter',\n  content: 'Custom content...',\n  elements: [\n    {\n      id: 'title',\n      type: 'text',\n      x: 20,\n      y: 20,\n      width: 200,\n      height: 30,\n      fontSize: 18,\n      color: '#000000'\n    }\n  ]\n};\n\n<PdfGenerator\n  document={customDocument}\n  isOpen={true}\n  onClose={() => {}}\n/>\n```\n\n### Using the Service Directly\n\n```typescript\nimport { pdfmeService } from './services/PdfmeService';\nimport { SAMPLE_INVOICE } from './types/PdfTemplates';\n\nasync function generateInvoice() {\n  try {\n    const template = pdfmeService.getInvoiceTemplate();\n    const inputs = [SAMPLE_INVOICE];\n    \n    const pdfData = await pdfmeService.generatePdf(template, inputs, {\n      filename: 'invoice-2024-001.pdf',\n      onProgress: (progress) => {\n        console.log(`${progress.message} (${progress.progress}%)`);\n      }\n    });\n    \n    await pdfmeService.downloadPdf(pdfData, 'invoice-2024-001.pdf');\n  } catch (error) {\n    console.error('Invoice generation failed:', error);\n  }\n}\n```\n\n## üé® Customization\n\n### Creating Custom Templates\n\n```typescript\nimport { Template } from '@pdfme/common';\n\nconst customTemplate: Template = {\n  basePdf: BLANK_PDF,\n  schemas: [{\n    title: {\n      type: 'text',\n      position: { x: 20, y: 20 },\n      width: 170,\n      height: 15,\n      fontSize: 18,\n      fontColor: '#000000',\n      fontName: 'Helvetica-Bold'\n    },\n    content: {\n      type: 'text',\n      position: { x: 20, y: 40 },\n      width: 170,\n      height: 100,\n      fontSize: 12,\n      lineHeight: 1.4\n    }\n  }]\n};\n```\n\n### Template Field Properties\n\n#### Text Fields\n- `type`: 'text'\n- `position`: { x: number, y: number }\n- `width`: number\n- `height`: number\n- `fontSize`: number (6-72)\n- `fontColor`: string (hex color)\n- `fontName`: 'Helvetica' | 'Helvetica-Bold' | 'Times-Roman' | etc.\n- `alignment`: 'left' | 'center' | 'right'\n- `lineHeight`: number (1.0-3.0)\n\n#### Image Fields\n- `type`: 'image'\n- `position`: { x: number, y: number }\n- `width`: number\n- `height`: number\n\n## üöÄ Performance Optimization\n\n### Best Practices\n\n1. **Template Validation**: Always validate templates before generation\n2. **Image Optimization**: Compress images and limit dimensions\n3. **Font Management**: Use standard fonts when possible\n4. **Progress Tracking**: Implement progress callbacks for long operations\n5. **Error Handling**: Always wrap generation calls in try-catch blocks\n\n### Performance Monitoring\n\n```typescript\nimport { createPerformanceMonitor } from './utils/pdfUtils';\n\nconst monitor = createPerformanceMonitor();\n\n// Start timing\nmonitor.startTimer('pdf-generation');\n\n// ... PDF generation code ...\n\n// End timing\nmonitor.endTimer('pdf-generation');\n\n// Get average time\nconst avgTime = monitor.getAverageTime('pdf-generation');\nconsole.log(`Average generation time: ${avgTime}ms`);\n```\n\n### Validation Utilities\n\n```typescript\nimport { validateTemplate, validateInputData } from './utils/pdfUtils';\n\n// Validate template\nconst templateResult = validateTemplate(myTemplate);\nif (!templateResult.isValid) {\n  console.error('Template errors:', templateResult.errors);\n}\n\n// Validate input data\nconst inputResult = validateInputData(myInputs, myTemplate);\nif (!inputResult.isValid) {\n  console.error('Input errors:', inputResult.errors);\n}\n```\n\n## üß™ Testing\n\n### Unit Tests\n\n```typescript\nimport { pdfmeService } from './services/PdfmeService';\nimport { validateTemplate } from './utils/pdfUtils';\n\ndescribe('PdfmeService', () => {\n  test('should generate business letter template', () => {\n    const template = pdfmeService.getBusinessLetterTemplate();\n    const validation = validateTemplate(template);\n    expect(validation.isValid).toBe(true);\n  });\n  \n  test('should validate input data', () => {\n    const template = pdfmeService.getInvoiceTemplate();\n    const inputs = [SAMPLE_INVOICE];\n    const validation = validateInputData(inputs, template);\n    expect(validation.isValid).toBe(true);\n  });\n});\n```\n\n## üêõ Troubleshooting\n\n### Common Issues\n\n#### PDF Generation Fails\n- Check template validation\n- Verify input data format\n- Ensure all required fields are provided\n- Check browser compatibility\n\n#### Designer Not Loading\n- Verify DOM container exists\n- Check template format\n- Ensure pdfme dependencies are loaded\n\n#### Download Not Working\n- Check browser popup settings\n- Verify file permissions\n- Ensure download attribute support\n\n### Error Codes\n\n- `TEMPLATE_INVALID`: Template structure is invalid\n- `INPUT_MISSING`: Required input data is missing\n- `GENERATION_FAILED`: PDF generation process failed\n- `DOWNLOAD_FAILED`: File download failed\n- `PREVIEW_FAILED`: PDF preview failed\n\n## üìã Requirements\n\n### Dependencies\n- `@pdfme/generator`: PDF generation engine\n- `@pdfme/ui`: Visual designer component\n- `@pdfme/common`: Common types and utilities\n- `@pdfme/schemas`: Field type definitions\n- `lucide-react`: Icons\n- `react`: UI framework\n\n### Browser Support\n- Chrome 80+\n- Firefox 75+\n- Safari 13+\n- Edge 80+\n\n### Performance Requirements\n- PDF generation: <2 seconds for typical documents\n- Memory usage: <50MB for complex templates\n- File size: Optimized output under 1MB for text documents\n\n## üîß Configuration\n\n### Environment Variables\n\n```bash\n# Optional: PDF generation timeout (ms)\nREACT_APP_PDF_GENERATION_TIMEOUT=30000\n\n# Optional: Maximum file size (bytes)\nREACT_APP_MAX_PDF_SIZE=10485760\n\n# Optional: Enable performance monitoring\nREACT_APP_PDF_PERFORMANCE_MONITORING=true\n```\n\n### Service Configuration\n\n```typescript\n// Configure PdfmeService options\nconst service = new PdfmeService({\n  defaultTimeout: 30000,\n  enablePerformanceMonitoring: true,\n  maxFileSize: 10 * 1024 * 1024, // 10MB\n  imageOptimization: {\n    maxWidth: 1200,\n    maxHeight: 1200,\n    quality: 0.8\n  }\n});\n```\n\n## üìà Roadmap\n\n### Current Features ‚úÖ\n- Professional templates\n- Visual designer\n- Progress tracking\n- Error handling\n- Performance monitoring\n\n### Upcoming Features üöß\n- AI-powered template generation\n- Batch PDF processing\n- Cloud storage integration\n- Advanced styling options\n- Template marketplace\n\n### Future Enhancements üîÆ\n- Real-time collaboration\n- Version control\n- Digital signatures\n- Form field support\n- Advanced analytics\n\n---\n\n**Note**: This PDF generation system is designed for production use with comprehensive error handling, performance optimization, and user experience considerations. For support or feature requests, please refer to the project documentation."